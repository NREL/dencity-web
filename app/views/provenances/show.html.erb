<h2>Provenance</h2>

<h3 class="edit-name"><%= @provenance.name %> <% if can? :update, @provenance %><%= link_to "[ edit ]", edit_provenance_path(@provenance), class: "edit-link" %><% end %></h3>
<table class="table table-striped">
  <% @provenance.attributes.keys.each do |key| %>
    <% unless key == "created_at" or key == "updated_at" %>

      <% if key == 'user_id' and !can? :update, @provenance  %>
      <% else %>
        <tr>
          <th> <%= key == "_id" ? "ID" : key.humanize%></th>
          <td>
            <% if key == 'user_id' %><%= @provenance.user.email %>
            <% elsif key == 'analysis_types' %><%= @provenance.analysis_types.join(', ') %>
            <% elsif key == 'analysis_information' %>
              <% @provenance.analysis_information.each do |key2, value2| %>
                <strong><%= key2 %></strong>: <% if key2 == 'objective_functions' && !value2.nil? %><br><% value2.each do |val| %>&nbsp;&nbsp;<%= val %><br/><% end %><% else %><%= value2 %><% end %><br/>
              <% end %>
            <% else %>
              <%= @provenance[key] %>
            <% end %>
          </td>
        </tr>
      <% end %>
    <% end %>
  <% end %>
</table>

