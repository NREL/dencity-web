<h2><% if can? :manage, :all %>All <% end %>Buildings <% if can? :create, Structure %><%= link_to "[ add new building ]", new_structure_path, class: "edit-link" %><% end %></h2>

<table class="tablesorter table table-striped">
  <thead>
  <tr>
    <th>ID</th>
    <th>Provenance</th>
    <% if can? :manage, :all %>
      <th>User</th>
      <th>Actions</th>
    <% end %>
  </tr>
  </thead>
  <tbody>
    <% @structures.each do |structure| %>
      <tr>
        <td><%= link_to structure.id, structure %></td>
        <td><%= structure.provenance.display_name unless structure.provenance.nil? %></td>
        <% if can? :manage, :all %><td><%= structure.user.email %></td><% end %>
        <% if can? :manage, structure %><td><%= link_to 'Edit', edit_structure_path(structure) %> | <%= link_to 'Destroy', structure, method: :delete, data: { confirm: 'Are you sure?' } %></td> <% end %>
      </tr>
    <% end %>
  </tbody>
</table>
