<h2>Buildings <% if can? :create, Structure %><%= link_to "[ add new building ]", new_structure_path, class: "edit-link" %><% end %></h2>

<div class="row-fluid">
  <div class="col-md-2">

  </div>
  <div class="col-md-10">
    <p class="pad-top-30">The list below contains the last 500 buildings added to DEnCity.</p>
    <table class="tablesorter table table-striped">
      <thead>
      <tr>
        <th>Analysis Name</th>
        <th>Added </th>
        <th>Total Site EUI</th>
        <th>Total Source EUI</th>
        <% if can? :manage, :all %>
          <th>User</th>
        <% end %>
        <% if current_user %><th>Actions</th><% end %>

      </tr>
      </thead>
      <tbody>
      <% @structures.each do |structure| %>
        <tr>
          <td><%= link_to structure.provenance.display_name, structure %></td>
          <td> <%= time_ago_in_words(structure.created_at) %> ago </td>
          <td><%= structure['total_site_eui'] %> MJ/m&sup2;</td>
          <td><%= structure['total_source_eui'] %> MJ/m&sup2;</td>
          <% if can? :manage, :all %><td><%= structure.user.email unless structure.user.nil? %></td><% end %>
          <% if current_user %><td><% if can? :manage, structure %><%= link_to 'Edit', edit_structure_path(structure) %> | <%= link_to 'Destroy', structure, method: :delete, data: { confirm: 'Are you sure?' } %><% end %></td><% end %>
        </tr>
      <% end %>
      </tbody>
    </table>
  </div>
</div>
